<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Restaurant Menu</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Roboto', sans-serif;
            -webkit-tap-highlight-color: transparent;
        }
        
        body {
            background: #f0f0f0;
            color: #333333;
            min-height: 100vh;
            display: flex;
            flex-direction: column;
            padding: 16px;
            margin: 0 auto;
            position: relative;
            overflow-x: hidden;
            border: 2px solid #000;
            max-width: 412px;
            width: 100%;
        }
        
        /* Header with 4 equal spaces */
        .header {
            background: #f0f0f0;
            display: grid;
            grid-template-columns: 83px 83px 83px 83px;
            gap: 16px;
            align-items: center;
            height: 88px;
            margin-bottom: 16px;
            position: relative;
            width: 100%;
        }
        
        .logo-container {
            background: #ffffff;
            border-radius: 8px;
            width: 83px;
            height: 40px;
            display: flex;
            align-items: center;
            justify-content: center;
            box-shadow: 5px 5px 10px #d1d1d1, -5px -5px 10px #ffffff;
            border: 1px solid #000;
            grid-column: 1;
        }
        
        .logo {
            font-size: 20px;
            font-weight: 700;
        }
        
        /* Empty space in header (space 2) */
        .header-space {
            grid-column: 2;
            width: 83px;
            height: 40px;
        }
        
        .header-buttons {
            display: flex;
            gap: 16px;
            grid-column: 3 / span 2;
        }
        
        .header-btn {
            background: #f0f0f0;
            color: #6b8e23;
            border-radius: 8px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: 500;
            cursor: pointer;
            width: 83px;
            height: 40px;
            gap: 5px;
            padding: 0 10px;
            box-shadow: 5px 5px 10px #d1d1d1, -5px -5px 10px #ffffff;
            border: 1px solid #000;
            transition: all 0.3s ease;
            font-size: 12px;
        }
        
        .header-btn:active {
            box-shadow: inset 5px 5px 10px #d1d1d1, inset -5px -5px 10px #ffffff;
        }
        
        /* Search bar */
        .search-container {
            background: #ffffff;
            border-radius: 8px;
            padding: 12px 16px;
            display: flex;
            align-items: center;
            gap: 12px;
            margin-bottom: 16px;
            width: 100%;
            height: 48px;
            border: 1px solid #d1d1d1;
            transition: all 0.3s ease;
        }
        
        .search-container input {
            flex: 1;
            border: none;
            outline: none;
            font-size: 16px;
            background: transparent;
            color: rgba(51, 51, 51, 0.49);
        }
        
        /* Filters aligned with header */
        .filters {
            display: grid;
            grid-template-columns: 83px 83px 83px 83px;
            gap: 16px;
            margin-bottom: 24px;
            width: 100%;
        }
        
        .filter-btn {
            background: #f0f0f0;
            border-radius: 8px;
            display: flex;
            align-items: center;
            cursor: pointer;
            width: 83px;
            height: 32px;
            justify-content: center;
            gap: 8px;
            transition: all 0.3s ease;
            box-shadow: 5px 5px 10px #d1d1d1, 5px 5px 10px #ffffff;
            border: 1px solid #000;
        }
        
        /* Veg filter aligned with logo (space 1) */
        .filter-btn.veg {
            grid-column: 1;
        }
        
        /* Non-veg filter aligned with empty space (space 2) */
        .filter-btn.non-veg {
            grid-column: 2;
        }
        
        .filter-btn.active {
            box-shadow: inset 5px 5px 10px #d1d1d1, inset -5px -5px 10px #ffffff;
        }
        
        .filter-btn.veg.active {
            background-color: #e8f5e9;
        }
        
        .filter-btn.non-veg.active {
            background-color: #ffebee;
        }
        
        .veg-indicator {
            width: 16px;
            height: 16px;
            border: 1px solid #008000;
            border-radius: 2px;
            display: flex;
            align-items: center;
            justify-content: center;
            background-color: white;
        }
        
        .veg-dot {
            width: 8px;
            height: 8px;
            background: #008000;
            border-radius: 50%;
        }
        
        .non-veg-indicator {
            width: 16px;
            height: 16px;
            border: 1px solid #d40000;
            border-radius: 2px;
            display: flex;
            align-items: center;
            justify-content: center;
            background-color: white;
        }
        
        .non-veg-dot {
            width: 8px;
            height: 8px;
            background: #d40000;
            border-radius: 50%;
        }
        
        .filter-text {
            white-space: nowrap;
            font-size: 12px;
            font-weight: 500;
        }
        
        /* Menu grid with exact dimensions */
        .menu-grid {
            display: grid;
            grid-template-columns: repeat(2, 182px);
            gap: 16px;
            margin-bottom: 80px;
            width: 100%;
            justify-content: center;
        }
        
        .menu-item {
            background: #f0f0f0;
            border-radius: 8px;
            overflow: hidden;
            box-shadow: 5px 5px 10px #d1d1d1, -5px -5px 10px #ffffff;
            height: 251px;
            width: 182px;
            cursor: pointer;
            transition: all 0.3s ease;
        }
        
        .menu-item:active {
            box-shadow: inset 5px 5px 10px #d1d1d1, inset -5px -5px 10px #ffffff;
        }
        
        .food-image {
            width: 182px;
            height: 152px;
            object-fit: cover;
            display: block;
            border-radius: 8px 8px 0 0;
        }
        
        .food-details {
            padding: 8px;
            display: flex;
            flex-direction: column;
            gap: 40px;
            width: 166px;
            height: 83px;
            margin:  px;
        }
        
        .food-name-type {
            display: flex;
            justify-content: space-between;
            align-items: center;
            width: 166px;
            height: 19px;
        }
        
        .food-name {
            font-weight: 500;
            font-size: 16px;
            white-space: nowrap;
            overflow: hidden;
            text-overflow: ellipsis;
            max-width: 140px;
        }
        
        .food-type {
            width: 16px;
            height: 16px;
            position: relative;
        }
        
        .type-indicator {
            width: 16px;
            height: 16px;
            border-radius: 2px;
            border: 0.5px solid;
            position: absolute;
            background-color: white;
        }
        
        .type-dot {
            width: 8px;
            height: 8px;
            border-radius: 50%;
            position: absolute;
            top: 4px;
            left: 4px;
        }
        
        .veg-type .type-indicator {
            border-color: #008000;
        }
        
        .veg-type .type-dot {
            background: #008000;
        }
        
        .non-veg-type .type-indicator {
            border-color: #d40000;
        }
        
        .non-veg-type .type-dot {
            background: #d40000;
        }
        
        .food-price-action {
            display: flex;
            justify-content: space-between;
            align-items: center;
            width: 166px;
            height: 24px;
        }
        
        .food-price {
            font-weight: 600;
            font-size: 16px;
        }
        
        .add-btn {
            background: #6b8e23;
            color: #ffffff;
            border-radius: 3px;
            font-size: 12px;
            font-weight: 600;
            cursor: pointer;
            border: none;
            transition: all 0.3s ease;
            width: 67px;
            height: 24px;
            display: flex;
            align-items: center;
            justify-content: center;
            box-shadow: 3px 3px 6px #d1d1d1, -3px -3px 6px #ffffff;
        }
        
        .add-btn:active {
            box-shadow: inset 3px 3px 6px #5a7120, inset -3px -3px 6px #7cab26;
        }
        
        .quantity-controls {
            display: flex;
            align-items: center;
            justify-content: space-between;
            width: 67px;
            height: 24px;
            background: #6b8e23;
            border-radius: 3px;
            padding: 0 4px;
        }
        
        .quantity-btn {
            background: none;
            border: none;
            width: 20px;
            height: 100%;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            font-weight: 600;
            color: white;
            font-size: 14px;
        }
        
        .quantity-value {
            font-size: 12px;
            font-weight: 500;
            color: white;
            background: none;
            padding: 0 4px;
        }
        
        /* Cart summary */
        .cart-summary {
            background: #6b8e23;
            color: white;
            border-radius: 8px;
            padding: 16px;
            display: none;
            justify-content: space-between;
            align-items: center;
            width: 100%;
            height: 56px;
            position: fixed;
            bottom: 20px;
            left: 50%;
            transform: translateX(-50%);
            box-shadow: 5px 5px 10px #d1d1d1, -5px -5px 10px #ffffff;
            z-index: 10;
            max-width: 380px;
        }
        
        .cart-summary.visible {
            display: flex;
        }
        
        .cart-items {
            font-weight: 500;
            display: flex;
            align-items: center;
            gap: 8px;
        }
        
        .view-cart-btn {
            background: transparent;
            color: white;
            border: none;
            font-weight: 600;
            cursor: pointer;
        }
        
        /* Food detail view - Fixed dimensions 412x480 */
        .food-detail {
            display: none;
            position: fixed;
            bottom: 0;
            left: 50%;
            transform: translateX(-50%) translateY(100%);
            width: 100%;
            height: 480px;
            background: #f0f0f0;
            z-index: 20;
            padding: 0;
            border-top-left-radius: 16px;
            border-top-right-radius: 16px;
            box-shadow: 0 -4px 20px rgba(0, 0, 0, 0.15);
            transition: transform 0.4s ease;
            max-width: 412px;
            overflow: hidden;
        }
        
        .food-detail.active {
            transform: translateX(-50%) translateY(0);
            display: flex;
            flex-direction: column;
        }
        
        .detail-image-container {
            position: relative;
            width: 100%;
            height: 240px;
            flex-shrink: 0;
        }
        
        .detail-image {
            width: 100%;
            height: 100%;
            object-fit: cover;
            display: block;
        }
        
        .back-btn {
            position: absolute;
            top: 16px;
            left: 16px;
            width: 32px;
            height: 32px;
            background: #6b8e23;
            color: white;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            box-shadow: 3px 3px 6px #5a7120, -3px -3px 6px #7cab26;
            border: 1px solid #000;
        }
        
        .back-btn:active {
            box-shadow: inset 3px 3px 6px #5a7120, inset -3px -3px 6px #7cab26;
        }
        
        .detail-content {
            padding: 16px;
            flex: 1;
            display: flex;
            flex-direction: column;
        }
        
        .detail-name-price {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 12px;
        }
        
        .detail-name-container {
            display: flex;
            align-items: center;
            gap: 8px;
        }
        
        .detail-name {
            font-size: 18px;
            font-weight: 600;
        }
        
        .detail-price {
            font-size: 18px;
            font-weight: 600;
        }
        
        .detail-description {
            background: #f0f0f0;
            padding: 12px;
            border-radius: 8px;
            margin-bottom: 16px;
            flex: 1;
            overflow-y: auto;
            font-size: 14px;
            line-height: 1.4;
            box-shadow: inset 5px 5px 10px #d1d1d1, inset -5px -5px 10px #ffffff;
        }
        
        .detail-add-btn {
            background: #6b8e23;
            color: white;
            border: none;
            border-radius: 8px;
            font-size: 16px;
            font-weight: 600;
            cursor: pointer;
            width: 100%;
            height: 56px;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.3s ease;
            margin-bottom: 16px;
            box-shadow: 5px 5px 10px #d1d1d1, -5px -5px 10px #ffffff;
        }
        
        .detail-add-btn:active {
            box-shadow: inset 5px 5px 10px #5a7120, inset -5px -5px 10px #7cab26;
        }
        
        .detail-quantity-controls {
            display: none;
            align-items: center;
            justify-content: space-between;
            width: 100%;
            height: 56px;
            background: #6b8e23;
            border-radius: 8px;
            margin-bottom: 16px;
            box-shadow: 5px 5px 10px #d1d1d1, -5px -5px 10px #ffffff;
            padding: 0 16px;
        }
        
        .detail-quantity-btn {
            background: none;
            border: none;
            width: 56px;
            height: 100%;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            font-size: 24px;
            font-weight: 600;
            color: white;
        }
        
        .detail-quantity-value {
            font-size: 20px;
            font-weight: 500;
            color: white;
            background: none;
            padding: 0 16px;
        }
        
        .overlay {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.5);
            z-index: 15;
        }
        
        .overlay.active {
            display: block;
        }
        
        .empty-state {
            text-align: center;
            padding: 40px 20px;
            color: #888;
            grid-column: 1 / -1;
        }
        
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }
        
        .menu-item {
            animation: fadeIn 0.5s ease forwards;
        }

        /* Media query for very small devices */
        @media (max-width: 350px) {
            .menu-grid {
                grid-template-columns: 1fr;
                justify-items: center;
            }
            
            .header-btn {
                width: 70px;
                font-size: 11px;
            }
            
            .filter-btn {
                width: 70px;
            }
            
            .filter-text {
                font-size: 11px;
            }
            
            .add-btn, .quantity-controls {
                width: 60px;
                height: 22px;
            }
            
            .detail-add-btn, .detail-quantity-controls {
                width: 100%;
                max-width: 300px;
            }
            
            .food-detail {
                height: 100vh;
            }
            
            .detail-image-container {
                height: 35vh;
            }
        }
    </style>
</head>
<body>
    <!-- Overlay -->
    <div class="overlay" id="overlay"></div>

    <!-- Main View -->
    <div class="main-view">
        <!-- Header with 4 equal spaces -->
        <header class="header">
            <div class="logo-container">
                <div class="logo">LOGO</div>
            </div>
            
            <!-- Empty space (space 2) -->
            <div class="header-space"></div>
            
            <div class="header-buttons">
                <div class="header-btn call-waiter">
                    <i class="fas fa-bell"></i>
                    <span class="call-waiter">Call Waiter</span>
                </div>
                <div class="header-btn table">
                 <img src="table.png" alt="Table Icon" style="height: 24px; width: auto;" />
                 <span>1418</span>
                </div>
            </div>
        </header>

        <!-- Search Bar -->
        <div class="search-container" id="search-container">
            <i class="fas fa-search" style="color: #6b8e23;"></i>
            <input type="text" placeholder="Search Food Name" id="search-input">
        </div>

        <!-- Filter Buttons aligned with header -->
        <div class="filters">
            <button class="filter-btn veg" data-filter="veg">
                <div class="veg-indicator">
                    <div class="veg-dot"></div>
                </div>
                <span class="filter-text">Veg</span>
            </button>
            <button class="filter-btn non-veg" data-filter="non-veg">
                <div class="non-veg-indicator">
                    <div class="non-veg-dot"></div>
                </div>
                <span class="filter-text">Non-Veg</span>
            </button>
        </div>

        <!-- Menu Grid -->
        <div class="menu-grid" id="menu-grid">
            <!-- Food items will be dynamically inserted here -->
        </div>

        <!-- Cart Summary -->
        <div class="cart-summary" id="cart-summary">
            <div class="cart-items">
                <i class="fas fa-concierge-bell"></i>
                <span>Items added: <span id="cart-count">0</span></span>
            </div>
            <button class="view-cart-btn">View Plate ></button>
        </div>
    </div>

    <!-- Food Detail View (hidden by default) -->
    <div class="food-detail" id="food-detail">
        <div class="detail-image-container">
            <img src="" alt="Food Image" class="detail-image" id="detail-image">
            <div class="back-btn" id="back-btn">
                <i class="fas fa-arrow-left"></i>
            </div>
        </div>
        
        <div class="detail-content">
            <div class="detail-name-price">
                <div class="detail-name-container">
                    <div class="food-type veg-type" id="detail-type">
                        <div class="type-indicator"></div>
                        <div class="type-dot"></div>
                    </div>
                    <div class="detail-name" id="detail-name">Food Name</div>
                </div>
                <div class="detail-price" id="detail-price">₹180</div>
            </div>
            
            <div class="detail-description" id="detail-description">
                This is a delicious food item with fresh ingredients and authentic flavors that will satisfy your taste buds.
            </div>
            
            <button class="detail-add-btn" id="detail-add-btn">ADD TO CART</button>
            <div class="detail-quantity-controls" id="detail-quantity-controls">
                <button class="detail-quantity-btn" id="detail-minus-btn">-</button>
                <span class="detail-quantity-value" id="detail-quantity-value">1</span>
                <button class="detail-quantity-btn" id="detail-plus-btn">+</button>
            </div>
        </div>
    </div>

    <script>
        // Sample food data
        const foodItems = [
            { 
                id: 1, 
                name: "Margherita Pizza", 
                price: 250, 
                image: "https://images.unsplash.com/photo-1604068549290-dea0e4a305ca?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxzZWFyY2h8NHx8cGl6emF8ZW58MHx8MHx8fDA%3D&auto=format&fit=crop&w=500&q=60", 
                type: "veg",
                description: "Classic pizza with tomato sauce, mozzarella cheese, and fresh basil on a thin crust."
            },
            { 
                id: 2, 
                name: "Chicken Burger", 
                price: 180, 
                image: "https://images.unsplash.com/photo-1571091655789-405eb7a3a3a8?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxzZWFyY2h8MTB8fGNoaWNrZW4lMjBidXJnZXJ8ZW58MHx8MHx8fDA%3D&auto=format&fit=crop&w=500&q=60", 
                type: "non-veg",
                description: "Juicy grilled chicken patty with lettuce, tomato, and special sauce in a soft bun."
            },
            { 
                id: 3, 
                name: "Veg Pasta", 
                price: 160, 
                image: "https://images.unsplash.com/photo-1621996346565-e3dbc353d2e5?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxzZWFyY2h8NHx8cGFzdGElMjB2ZWd8ZW58MHx8MHx8fDA%3D&auto=format&fit=crop&w=500&q=60", 
                type: "veg",
                description: "Penne pasta tossed in a rich tomato sauce with fresh vegetables and herbs."
            },
            { 
                id: 4, 
                name: "Grilled Chicken", 
                price: 320, 
                image: "https://images.unsplash.com/photo-1604503468725-2bef0fbb6c75?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxzZWFyY2h8Mnx8Z3JpbGxlZCUyMGNoaWNrZW58ZW58MHx8MHx8fDA%3D&auto=format&fit=crop&w=500&q=60", 
                type: "non-veg",
                description: "Tender chicken breast marinated in herbs and spices, grilled to perfection."
            },
            { 
                id: 5, 
                name: "Fresh Salad", 
                price: 120, 
                image: "https://images.unsplash.com/photo-1512621776951-a57141f2eefd?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxzZWFyY2h8NHx8c2FsYWR8ZW58MHx8MHx8fDA%3D&auto=format&fit=crop&w=500&q=60", 
                type: "veg",
                description: "Mixed greens with cherry tomatoes, cucumbers, olives, and a light vinaigrette dressing."
            },
            { 
                id: 6, 
                name: "Fish Curry", 
                price: 280, 
                image: "https://images.unsplash.com/photo-1639163596740-77aa5e342f1f?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxzZWFyY2h8MTZ8fGZpc2glMjBjdXJyeXxlbnwwfHwwfHx8MA%3D%3D&auto=format&fit=crop&w=500&q=60", 
                type: "non-veg",
                description: "Fresh fish cooked in a flavorful curry with coconut milk and aromatic spices."
            }
        ];

        // Cart state
        let cart = [];
        let currentFilter = "all";
        let searchTerm = "";
        let currentDetailItemId = null;
        let detailQuantity = 1;

        // DOM Elements
        const menuGrid = document.getElementById('menu-grid');
        const searchInput = document.getElementById('search-input');
        const filterButtons = document.querySelectorAll('.filter-btn');
        const cartCount = document.getElementById('cart-count');
        const cartSummary = document.getElementById('cart-summary');
        const viewCartBtn = document.querySelector('.view-cart-btn');
        const foodDetail = document.getElementById('food-detail');
        const backBtn = document.getElementById('back-btn');
        const detailImage = document.getElementById('detail-image');
        const detailName = document.getElementById('detail-name');
        const detailPrice = document.getElementById('detail-price');
        const detailDescription = document.getElementById('detail-description');
        const detailAddBtn = document.getElementById('detail-add-btn');
        const detailQuantityControls = document.getElementById('detail-quantity-controls');
        const detailMinusBtn = document.getElementById('detail-minus-btn');
        const detailPlusBtn = document.getElementById('detail-plus-btn');
        const detailQuantityValue = document.getElementById('detail-quantity-value');
        const detailType = document.getElementById('detail-type');
        const overlay = document.getElementById('overlay');

        // Initialize the page
        function init() {
            renderFoodItems(foodItems);
            setupEventListeners();
            updateCartUI();
        }

        // Render food items
        function renderFoodItems(items) {
            menuGrid.innerHTML = '';
            
            const filteredItems = items.filter(item => {
                const matchesFilter = currentFilter === "all" || item.type === currentFilter;
                const matchesSearch = item.name.toLowerCase().includes(searchTerm.toLowerCase());
                return matchesFilter && matchesSearch;
            });
            
            if (filteredItems.length === 0) {
                menuGrid.innerHTML = '<div class="empty-state">No food items found</div>';
                return;
            }
            
            filteredItems.forEach(item => {
                const cartItem = cart.find(cartItem => cartItem.id === item.id);
                const quantity = cartItem ? cartItem.quantity : 0;
                
                const foodItemElement = document.createElement('div');
                foodItemElement.classList.add('menu-item');
                foodItemElement.dataset.id = item.id;
                foodItemElement.dataset.type = item.type;
                
                foodItemElement.innerHTML = `
                    <img src="${item.image}" alt="${item.name}" class="food-image">
                    <div class="food-details">
                        <div class="food-name-type">
                            <div class="food-name">${item.name}</div>
                            <div class="food-type ${item.type}-type">
                                <div class="type-indicator"></div>
                                <div class="type-dot"></div>
                            </div>
                        </div>
                        <div class="food-price-action">
                            <div class="food-price">₹${item.price}</div>
                            ${quantity > 0 ? 
                                `<div class="quantity-controls" data-id="${item.id}">
                                    <button class="quantity-btn minus-btn">-</button>
                                    <span class="quantity-value">${quantity}</span>
                                    <button class="quantity-btn plus-btn">+</button>
                                </div>` : 
                                `<button class="add-btn" data-id="${item.id}">ADD</button>`
                            }
                        </div>
                    </div>
                `;
                
                menuGrid.appendChild(foodItemElement);
            });
            
            attachMenuEventListeners();
        }

        function setupEventListeners() {
            searchInput.addEventListener('input', function() {
                searchTerm = this.value;
                renderFoodItems(foodItems);
            });
            
            filterButtons.forEach(button => {
                button.addEventListener('click', function() {
                    const filter = this.dataset.filter;
                    
                    if (this.classList.contains('active') && currentFilter === filter) {
                        this.classList.remove('active');
                        currentFilter = "all";
                    } else {
                        filterButtons.forEach(btn => btn.classList.remove('active'));
                        this.classList.add('active');
                        currentFilter = filter;
                    }
                    
                    renderFoodItems(foodItems);
                });
            });
            
            viewCartBtn.addEventListener('click', function() {
                alert(`Your cart has ${cart.reduce((sum, item) => sum + item.quantity, 0)} items. Total: ₹${calculateTotal()}`);
            });
            
            backBtn.addEventListener('click', function() {
                hideFoodDetail();
                // Refresh the menu items to reflect any changes
                renderFoodItems(foodItems);
            });
            
            detailAddBtn.addEventListener('click', function() {
                addToCart(currentDetailItemId, detailQuantity);
                updateDetailView(currentDetailItemId);
            });
            
            detailMinusBtn.addEventListener('click', function() {
                if (detailQuantity > 1) {
                    detailQuantity--;
                    detailQuantityValue.textContent = detailQuantity;
                    updateCartItemQuantity(currentDetailItemId, detailQuantity);
                } else if (detailQuantity === 1) {
                    removeFromCart(currentDetailItemId);
                    updateDetailView(currentDetailItemId);
                }
            });
            
            detailPlusBtn.addEventListener('click', function() {
                detailQuantity++;
                detailQuantityValue.textContent = detailQuantity;
                updateCartItemQuantity(currentDetailItemId, detailQuantity);
            });
            
            overlay.addEventListener('click', function() {
                hideFoodDetail();
                // Refresh the menu items to reflect any changes
                renderFoodItems(foodItems);
            });
        }
        
        function attachMenuEventListeners() {
            // Add button listeners
            const addButtons = document.querySelectorAll('.add-btn');
            addButtons.forEach(button => {
                button.addEventListener('click', function(e) {
                    const itemId = parseInt(this.dataset.id);
                    addToCart(itemId, 1);
                    e.stopPropagation();
                    updateItemButton(itemId);
                });
            });
            
            // Quantity control listeners
            const minusButtons = document.querySelectorAll('.minus-btn');
            minusButtons.forEach(button => {
                button.addEventListener('click', function(e) {
                    const control = this.parentElement;
                    const itemId = parseInt(control.dataset.id);
                    decrementCartItem(itemId);
                    e.stopPropagation();
                    updateItemButton(itemId);
                });
            });
            
            const plusButtons = document.querySelectorAll('.plus-btn');
            plusButtons.forEach(button => {
                button.addEventListener('click', function(e) {
                    const control = this.parentElement;
                    const itemId = parseInt(control.dataset.id);
                    incrementCartItem(itemId);
                    e.stopPropagation();
                    updateItemButton(itemId);
                });
            });
            
            // Menu item click listeners
            const menuItems = document.querySelectorAll('.menu-item');
            menuItems.forEach(item => {
                item.addEventListener('click', function() {
                    const itemId = parseInt(this.dataset.id);
                    showFoodDetail(itemId);
                });
            });
        }
        
        function updateItemButton(itemId) {
            const cartItem = cart.find(item => item.id === itemId);
            const quantity = cartItem ? cartItem.quantity : 0;
            const itemElement = document.querySelector(`.menu-item[data-id="${itemId}"]`);
            
            if (!itemElement) return;
            
            const actionContainer = itemElement.querySelector('.food-price-action');
            
            if (quantity > 0) {
                actionContainer.innerHTML = `
                    <div class="food-price">₹${foodItems.find(item => item.id === itemId).price}</div>
                    <div class="quantity-controls" data-id="${itemId}">
                        <button class="quantity-btn minus-btn">-</button>
                        <span class="quantity-value">${quantity}</span>
                        <button class="quantity-btn plus-btn">+</button>
                    </div>
                `;
                
                // Reattach event listeners to the new buttons
                const minusBtn = actionContainer.querySelector('.minus-btn');
                const plusBtn = actionContainer.querySelector('.plus-btn');
                
                minusBtn.addEventListener('click', function(e) {
                    const control = this.parentElement;
                    const itemId = parseInt(control.dataset.id);
                    decrementCartItem(itemId);
                    e.stopPropagation();
                    updateItemButton(itemId);
                });
                
                plusBtn.addEventListener('click', function(e) {
                    const control = this.parentElement;
                    const itemId = parseInt(control.dataset.id);
                    incrementCartItem(itemId);
                    e.stopPropagation();
                    updateItemButton(itemId);
                });
            } else {
                actionContainer.innerHTML = `
                    <div class="food-price">₹${foodItems.find(item => item.id === itemId).price}</div>
                    <button class="add-btn" data-id="${itemId}">ADD</button>
                `;
                
                const addButton = actionContainer.querySelector('.add-btn');
                addButton.addEventListener('click', function(e) {
                    addToCart(itemId, 1);
                    e.stopPropagation();
                    updateItemButton(itemId);
                });
            }
        }

        function showFoodDetail(itemId) {
            const item = foodItems.find(item => item.id === itemId);
            if (!item) return;
            
            currentDetailItemId = itemId;
            
            const cartItem = cart.find(cartItem => cartItem.id === itemId);
            detailQuantity = cartItem ? cartItem.quantity : 1;
            
            detailImage.src = item.image;
            detailName.textContent = item.name;
            detailPrice.textContent = `₹${item.price}`;
            detailDescription.textContent = item.description;
            detailQuantityValue.textContent = detailQuantity;
            
            // Update the type indicator
            detailType.className = `food-type ${item.type}-type`;
            detailType.innerHTML = `
                <div class="type-indicator"></div>
                <div class="type-dot"></div>
            `;
            
            updateDetailView(itemId);
            
            overlay.classList.add('active');
            foodDetail.classList.add('active');
            
            document.body.style.overflow = 'hidden';
        }
        
        function updateDetailView(itemId) {
            const cartItem = cart.find(item => item.id === itemId);
            
            if (cartItem && cartItem.quantity > 0) {
                detailAddBtn.style.display = 'none';
                detailQuantityControls.style.display = 'flex';
                detailQuantityValue.textContent = cartItem.quantity;
                detailQuantity = cartItem.quantity;
            } else {
                detailAddBtn.style.display = 'flex';
                detailQuantityControls.style.display = 'none';
                detailQuantity = 1;
                detailQuantityValue.textContent = detailQuantity;
            }
        }
        
        function hideFoodDetail() {
            overlay.classList.remove('active');
            foodDetail.classList.remove('active');
            document.body.style.overflow = 'auto';
        }
        
        function addToCart(itemId, quantity) {
            const itemIndex = cart.findIndex(item => item.id === itemId);
            const item = foodItems.find(item => item.id === itemId);
            
            if (itemIndex === -1) {
                // Add to cart
                cart.push({...item, quantity: quantity});
            } else {
                // Update quantity
                cart[itemIndex].quantity = quantity;
            }
            
            updateCartUI();
            updateDetailView(itemId);
        }
        
        function updateCartItemQuantity(itemId, quantity) {
            const itemIndex = cart.findIndex(item => item.id === itemId);
            
            if (itemIndex !== -1) {
                cart[itemIndex].quantity = quantity;
                updateCartUI();
            }
        }
        
        function removeFromCart(itemId) {
            const itemIndex = cart.findIndex(item => item.id === itemId);
            
            if (itemIndex !== -1) {
                cart.splice(itemIndex, 1);
            }
            
            updateCartUI();
        }
        
        function incrementCartItem(itemId) {
            const itemIndex = cart.findIndex(item => item.id === itemId);
            
            if (itemIndex !== -1) {
                cart[itemIndex].quantity++;
                updateCartUI();
            }
        }
        
        function decrementCartItem(itemId) {
            const itemIndex = cart.findIndex(item => item.id === itemId);
            
            if (itemIndex !== -1) {
                if (cart[itemIndex].quantity > 1) {
                    cart[itemIndex].quantity--;
                } else {
                    cart.splice(itemIndex, 1);
                }
                
                updateCartUI();
            }
        }

        function calculateTotal() {
            return cart.reduce((sum, item) => sum + item.price * item.quantity, 0);
        }

        function updateCartUI() {
            const totalItems = cart.reduce((sum, item) => sum + item.quantity, 0);
            cartCount.textContent = totalItems;
            
            if (totalItems > 0) {
                cartSummary.classList.add('visible');
            } else {
                cartSummary.classList.remove('visible');
            }
        }

        // Initialize the app
        init();
    </script>
</body>
</html>
